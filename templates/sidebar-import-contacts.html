{% extends 'sidebar-base.html' %}
    {% block maincontent %}
    <h4>Import your contacts</h4>
      {% if has_imported %}
      <!--- room for improvement (incremental load?)-->
        <b>Import Status:</b> last import: {{ user.last_contact_import.strftime('%Y-%m-%d at %I:%M:%S %p') }}
        <br>
        Your Google contacts should remain your source of truth, so if you'd like to reimport to update with any changes made there, you can refresh below: 
        <br><br>
        <a href="/clear-contacts" class="btn btn-primary">Refresh contacts</a><br><br>

        <table class="table">
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Occasion</th>
            <th>Date</th>
        </tr>
        {% for occasion in occasions %}
        <tr>
            <td>{{ occasion.contact.fname }}</td>
            <td>{{ occasion.contact.lname }}</td>
            <td>{{ occasion.occasion_type }}</td>
            <td>{{ occasion.date.strftime('%Y-%m-%d') }}</td>
        </tr>
        {% endfor %}
                </table>
    {% else %}
        <b>Import Status:</b> no previous imports
        <br><br>
        <a href="/import-contacts-helper">Import contacts</a><br> 
    {% endif %}
    <!-- Note: if you have other occasions you'd like to bulk manage your reminders for, you can add them on the Apply Notification Groups page. -->
<script>
(() => {
    'use strict'
    document.querySelector("#importtab").classList.add('active')
    })()
</script>
{% endblock %}  